<!DOCTYPE html>
<html>
<head>
   <title>Siete y medio</title> 
<meta charset="utf-8"/>
<link rel="stylesheet" type="text/css" href="cartas.css">
<script type="text/javascript">
    window.onload=function(){
     numImg = 40;
	 contJugador=0;
     contBancada=0;
     resulCartas = document.getElementById("resultado");
    }
    
       function lanzarJug(){
            var numAlea = Math.floor(Math.random() * numImg ) + 1;
            var carta = "img/carta" + numAlea + ".PNG";
            document.getElementById("jugador").src = carta;
            var puntosJug = document.getElementById("puntJug");
         
            contJugador= contJugador + valorCartas(numAlea);
            puntosJug.innerHTML = contJugador;
            
            
            if(contJugador > 7.5){
                while(contBancada < 7.5){
                    lanzarBancada();
                }    
                 ganador()   
            }else if(contJugador == 7.5){
                while(contBancada < 7.5){
                    lanzarBancada();
                }
                ganador()
            }
       }
            
       function lanzarBancada(){
            var numAleaBanc = Math.floor(Math.random() * numImg ) + 1;
            var cartaBanc = "img/carta" + numAleaBanc + ".PNG";
            
            document.getElementById("banc").src = cartaBanc;
            var puntosBancada = document.getElementById("puntBancada");
            
            contBancada = contBancada + valorCartas(numAleaBanc);
            puntosBancada.innerHTML = contBancada;
        }
        function valorCartas(carta){
            
            var valor;
            
            if(carta >= 1 && carta <=4){
                valor = 1;
            }else if(carta >= 5 && carta <= 8){
                valor = 2;
            }else if (carta >= 9 && carta <= 12){    
                valor = 3;
            }else if (carta >= 13 && carta <= 16){    
                valor = 4;  
            }else if (carta >= 17 && carta <= 20){    
                valor = 5; 
            }else if (carta >= 21 && carta <= 24){    
                valor = 6;  
            }else if (carta >= 25 && carta <= 28){    
                valor = 7; 
            }else if (carta >= 29 && carta <= 32){    
                valor = 0.5; 
            }else if (carta >= 33 && carta <= 36){    
                valor = 0.5;     
            }else if (carta >= 37 && carta <= 40){    
                valor = 0.5; 
            }
            
            return valor;
            
        }
        function ganador(){
            if(contJugador == contBancada){
                resulCartas.innerHTML = "Vuelve a jugar ¡Has perdido!";
                    document.getElementById("jugador").onclick = function(){
                    resulCartas.innerHTML = "Ya no puedes jugar mas, debes iniciar una nueva partida";
                }
            }else if(contJugador < contBancada || contJugador <= 7.5){
                resulCartas.innerHTML = "Has ganado"; 
                    document.getElementById("jugador").onclick = function(){
                     resulCartas.innerHTML = "Ya no puedes jugar mas, debes iniciar una nueva partida";
                }
            }else if(contJugador > contBancada || contBancada <= 7.5){
             resulCartas.innerHTML = "Has perdido";
              document.getElementById("jugador").onclick = function(){
                 resulCartas.innerHTML = "Ya no puedes jugar mas, debes iniciar una nueva partida!";
             }
           
            }else if(contJugador>7.5 && contBancada<=7.5){
             resulCartas.innerHTML = "Vuelve a jugar ¡Has perdido!";
                    document.getElementById("jugador").onclick = function(){
                    resulCartas.innerHTML = "Ya no puedes jugar mas, debes iniciar una nueva partida";
                }
            }
            
        }  
        function plantarse(){
            if(contJugador < 7.5){
               resulCartas.innerHTML= "Te has plantado";
            } while(contBancada <7.5){
                lanzarBancada();
            }   
            ganador();
            document.getElementById("jugador").onclick = function(){
                 resulCartas.innerHTML = "Ya no puedes jugar mas, debes iniciar una nueva partida!";
             }
        }
        
        function nuevaPartida(){
            window.location.reload(true);
        }
</script>
</head>
<body>
	<h2>Bienvenido al juego de siete y medio</h2>
	<center>
    	<div id="jug1">
    		<table border=1>
    			<tr>
    				<td><h3>Jugador</h3></td>
    			</tr>
    			<tr>
    	            <td><img src="img/img1.jpg" id="jugador"  onclick="lanzarJug()" width="240" height="390"/></td>
    	            
    			</tr>
    			<tr>
    				<td id="puntJug"><h3>Puntos</h3></td>
    				
    			</tr>
    		</table>
    	</div>
    
    	<div id="bancada">
    		<table border=1>
    			<tr>
    				<td><h3>Bancada</h3></td>
    			</tr>
    			<tr>
    	            <td><img src="img/img1.jpg" id="banc" width="240" height="390"/></td>
    			</tr>
    			<tr>
    				<td id="puntBancada"><h3>Puntos</h3></td>
    			</tr>
    		</table>
    	</div>
    	<div id="btn1">
            <input type="button" id="plantar" value="Plantar" onclick="plantarse()"/>
            <input type="button" id="newPartida" value="Nueva partida" onclick="nuevaPartida()" />
        </div>
           
    	<div id="resultado"><h3>Resultado</h3></div>
    			    
    </center>
</body>
</html>